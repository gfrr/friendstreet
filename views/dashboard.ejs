<script src="./javascripts/APIHandler.js"></script>
<script src="./javascripts/ajaxcalls.js"></script>

<div class=container>
  <div class="main">
    <% messages.forEach((message) => { %>
          <div class="element ">
            <div class="cell<%=message.size%>"><p>
              <%= message.text %>
            </p>
            <p>

            </p>
            <div class="footer">
              <div class="button-container">
                <a class="button" href="#"  />Donate</a>

                <div class="voting">
                  <% if(typeof(currentUser)!== "undefined"){ %>
                  <% var votes = currentUser.messagesVoted.filter((elem)=> String(elem) == String(message._id)); %>

                  <% var hidden = 0; %>
                  <% if(votes.length > 0) hidden = 1 %>

                  <% if(!hidden) { %>
                  <button  class="button test glyphicon glyphicon-chevron-up vote" id="+<%=message._id %>" value="<%= message.score %>" ></button>
                  <% } %>
                  <div class="score">
                      <%= message.score %>
                  </div>
                  <% if(!hidden) { %>
                  <button class="button  test glyphicon glyphicon-chevron-down vote" id="-<%=message._id %>" value="<%= message.score %>"></button>
                  <% }}  %>
                </div>
            </div>
          </div>
          </div>
      <input type="hidden" id="messages" value=<%=messages%>>
    <% }) %>
  </div>
</div>
